<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to PDF Tool</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root { --primary: #2ea44f; --bg: #f6f8fa; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; background: var(--bg); }
        
        /* Header & Controls */
        header { background: #24292f; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h1 { margin: 0; font-size: 1.2rem; }
        button { background-color: var(--primary); color: white; border: 1px solid rgba(27,31,36,0.15); border-radius: 6px; padding: 6px 16px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        button:hover { background-color: #2c974b; }

        /* Main Layout */
        main { display: flex; flex: 1; overflow: hidden; gap: 10px; padding: 10px; }
        .pane { flex: 1; display: flex; flex-direction: column; background: white; border: 1px solid #d0d7de; border-radius: 6px; overflow: hidden; }
        .label { padding: 8px 12px; background: #f6f8fa; border-bottom: 1px solid #d0d7de; font-size: 12px; font-weight: 600; color: #57606a; }
        
        textarea { flex: 1; border: none; padding: 15px; font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace; font-size: 14px; outline: none; resize: none; }
        
        /* The Preview (This is what gets turned into PDF) */
        #preview { flex: 1; padding: 30px; overflow-y: auto; line-height: 1.6; color: #24292f; }
        #preview h1 { border-bottom: 1px solid #d0d7de; padding-bottom: .3em; }
        #preview code { background: rgba(175,184,193,0.2); padding: 0.2em 0.4em; border-radius: 6px; font-family: monospace; }
        #preview pre { background: #f6f8fa; padding: 16px; border-radius: 6px; overflow: auto; }
        #preview blockquote { border-left: .25em solid #d0d7de; color: #57606a; padding: 0 1em; margin: 0; }
        #preview img { max-width: 100%; }

        @media (max-width: 768px) { main { flex-direction: column; } }
    </style>
</head>
<body>

<header>
    <h1>Markdown PDF Studio</h1>
    <button onclick="downloadPDF()">Export to PDF</button>
</header>

<main>
    <div class="pane">
        <div class="label">MARKDOWN INPUT</div>
        <textarea id="editor" placeholder="Type your markdown here..." oninput="updatePreview()"># My Document
        
This is a **bold** statement.

## Features
- Fast conversion
- Browser-based
- Github styling</textarea>
    </div>

    <div class="pane">
        <div class="label">LIVE PREVIEW</div>
        <div id="preview"></div>
    </div>
</main>

<script>
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');

    // Update HTML on every keystroke
    function updatePreview() {
        const rawValue = editor.value;
        preview.innerHTML = marked.parse(rawValue);
    }

    async function downloadPDF() {
        const element = document.getElementById('preview');
        
        if (!editor.value.trim()) {
            alert("The document is empty!");
            return;
        }

        // Configuration
        const opt = {
            margin:       [0.5, 0.5], // Top/Bottom, Left/Right (inches)
            filename:     'document.pdf',
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2, useCORS: true, letterRendering: true },
            jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
        };

        // Execution
        try {
            await html2pdf().set(opt).from(element).save();
        } catch (err) {
            console.error(err);
            alert("Error generating PDF. Check console.");
        }
    }

    // Initialize on load
    updatePreview();
</script>

</body>
</html>
